<form #formUsuario="ngForm" class="example-form">

  <h1>{{ miUsuario._id ? 'Editar usuario' : 'Crear nuevo usuario' }}</h1>

  <mat-form-field class="datos">
    <mat-label>Nombre</mat-label>
    <input matInput name="nombre" required minlength="3"
           [(ngModel)]="miUsuario._nombre" #nombre="ngModel" placeholder="Nombre del usuario">
    <mat-error *ngIf="nombre.invalid && nombre.touched">
      El nombre es obligatorio y debe tener al menos 3 caracteres.
    </mat-error>
  </mat-form-field>

  <mat-form-field class="datos">
    <mat-label>Apellido</mat-label>
    <input matInput name="apellido" required minlength="3"
           [(ngModel)]="miUsuario._apellido" #apellido="ngModel" placeholder="Apellido del usuario">
    <mat-error *ngIf="apellido.invalid && apellido.touched">
      El apellido es obligatorio y debe tener al menos 3 caracteres.
    </mat-error>
  </mat-form-field>

  <mat-form-field class="datos">
    <mat-label>Email</mat-label>
    <input matInput type="email" name="email" required
           [(ngModel)]="miUsuario._email" #email="ngModel" placeholder="Correo electrónico">
    <mat-error *ngIf="email.invalid && email.touched">
      Ingrese un email válido.
    </mat-error>
  </mat-form-field>

  <mat-form-field class="datos">
    <mat-label>Contraseña</mat-label>
    <input matInput type="password" name="password" required minlength="6"
           [(ngModel)]="miUsuario._password" #password="ngModel" placeholder="Contraseña">
    <mat-error *ngIf="password.invalid && password.touched">
      La contraseña debe tener al menos 6 caracteres.
    </mat-error>
  </mat-form-field>

  <mat-form-field class="datos">
    <mat-label>Rol</mat-label>
    <mat-select name="rol" required [(ngModel)]="miUsuario._rol" #rol="ngModel">
      <mat-option *ngFor="let rolItem of rolesDisponibles" [value]="rolItem">{{ rolItem }}</mat-option>
    </mat-select>
    <mat-error *ngIf="rol.invalid && rol.touched">
      El rol es obligatorio.
    </mat-error>
  </mat-form-field>

  <mat-form-field class="datos">
    <mat-label>Fecha de nacimiento</mat-label>
    <input matInput type="date" name="fechaNacimiento" required
           [(ngModel)]="miUsuario._fechaNacimiento" #fechaNacimiento="ngModel">
    <mat-error *ngIf="fechaNacimiento.invalid && fechaNacimiento.touched">
      Fecha inválida.
    </mat-error>
  </mat-form-field>

  <mat-form-field class="datos">
    <mat-label>Teléfono</mat-label>
    <input matInput type="tel" name="telefono" required pattern="^[0-9]{10}$"
           [(ngModel)]="miUsuario._telefono" #telefono="ngModel" placeholder="Ej: 1122334455">
    <mat-error *ngIf="telefono.invalid && telefono.touched">
      El teléfono debe tener exactamente 10 dígitos numéricos.
    </mat-error>
  </mat-form-field>

  <mat-form-field class="datos">
    <mat-label>Dirección</mat-label>
    <input matInput name="direccion" required minlength="5"
           [(ngModel)]="miUsuario._direccion" #direccion="ngModel" placeholder="Dirección del usuario">
    <mat-error *ngIf="direccion.invalid && direccion.touched">
      La dirección debe tener al menos 5 caracteres.
    </mat-error>
  </mat-form-field>

  <div class="form-buttons" *ngIf="formUsuario.valid">
    <button mat-raised-button color="warn" type="button" (click)="Limpiar()">Limpiar</button>
    <button mat-raised-button color="primary" type="button" (click)="Guardar()">Guardar</button>
  </div>
</form>